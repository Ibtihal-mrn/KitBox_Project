<UserControl
  xmlns="https://github.com/avaloniaui"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:vm="clr-namespace:KitBox_Project.ViewModels"
  x:Class="KitBox_Project.Views.Client.Confirmation"
  x:DataType="vm:ConfirmationViewModel">

  <ScrollViewer VerticalScrollBarVisibility="Auto">
    <StackPanel HorizontalAlignment="Center" Margin="20" Spacing="15">

      <!-- Conteneur principal en forme de ticket, large -->
      <Border
        CornerRadius="8"
        BorderThickness="2"
        BorderBrush="DarkGray"
        Background="#FFFDF8"
        Width="650"
        Padding="16">

        <StackPanel Spacing="12">

          <!-- En-tÃªte / Logo -->
          <StackPanel HorizontalAlignment="Center" Spacing="4">
            <TextBlock Text="KITBOX" FontSize="30" FontWeight="Bold" />
            <TextBlock Text="Votre ticket de commande" FontSize="14" />
          </StackPanel>

          <!-- NumÃ©ro et date de commande -->
          <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="8">
            <TextBlock Text="{Binding OrderId, StringFormat='NÂ° {0}'}" FontStyle="Italic"/>
            <TextBlock Text="{Binding OrderDate, StringFormat='â€” {0:dd/MM/yyyy HH:mm}'}" FontStyle="Italic"/>
          </StackPanel>

          <!-- En-tÃªtes colonnes -->
          <Grid Margin="0,4" ColumnDefinitions="3*,1*,1*,1.5*,1.5*">
            <TextBlock Text="Article"       Grid.Column="0" FontWeight="Bold"/>
            <TextBlock Text="Dimensions"    Grid.Column="1" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock Text="QtÃ©"           Grid.Column="2" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock Text="Prix/unitÃ© â‚¬"  Grid.Column="3" FontWeight="Bold" HorizontalAlignment="Right"/>
            <TextBlock Text="Sous-total â‚¬"  Grid.Column="4" FontWeight="Bold" HorizontalAlignment="Right"/>
          </Grid>

          <!-- DÃ©tails des articles -->
          <ItemsControl ItemsSource="{Binding Items}">
            <ItemsControl.ItemTemplate>
              <DataTemplate>
                <Grid Margin="2,2" ColumnDefinitions="3*,1.5*,1*,1.5*,1.5*">
                  <TextBlock Text="{Binding Reference}"   Grid.Column="0" TextTrimming="CharacterEllipsis"/>
                  <TextBlock Text="{Binding Dimensions}" Grid.Column="1" HorizontalAlignment="Center"/>
                  <TextBlock Text="{Binding Quantity}"   Grid.Column="2" HorizontalAlignment="Center"/>
                  <TextBlock Text="{Binding SellingPrice, StringFormat='{}{0:0.00}'}"
                             Grid.Column="3" HorizontalAlignment="Right"/>
                  <TextBlock Text="{Binding TotalPrice,   StringFormat='{}{0:0.00}'}"
                             Grid.Column="4" HorizontalAlignment="Right"/>
                </Grid>
              </DataTemplate>
            </ItemsControl.ItemTemplate>
          </ItemsControl>

          <!-- Total final clairement libellÃ© -->
          <StackPanel Orientation="Horizontal"
                      HorizontalAlignment="Right"
                      Spacing="8"
                      Margin="0,4">
            <TextBlock Text="TOTAL FINAL :" FontWeight="Bold" FontSize="16"/>
            <TextBlock Text="{Binding GrandTotal, StringFormat='{}{0:0.00} â‚¬'}"
                       FontWeight="Bold" FontSize="16"/>
          </StackPanel>

        </StackPanel>
      </Border>

      <!-- Boutons en dehors du ticket -->
      <StackPanel Orientation="Horizontal"
                  HorizontalAlignment="Center"
                  Spacing="12">
        <Button Content="â†© Accueil" Click="GoToFirstPage" Width="110"/>
        <Button Content="ðŸ†• Nouvelle commande" Click="GoToFirstPage" Width="150"/>
      </StackPanel>

    </StackPanel>
  </ScrollViewer>
</UserControl>
